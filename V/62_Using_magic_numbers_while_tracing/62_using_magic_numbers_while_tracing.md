#第62章  
##跟踪时使用幻数

通常情况下，我们的主要目标是理解程序从文件读取或从网络中接收的值的用途。手动跟踪某个值通常是件体力活。这个最简单应对技术之一(尽管不是百分之百靠谱)是使用你自己的幻数。

这在某种程度上类似于X射线计算机断层扫描：造影剂注射到病人的血液中，增强患者的内部结构在X射线下的能见度。例如，健康人的血液在肾脏渗透是众所周知的，如果介质在血液中则可以很容易的在断层中看到，血液如何渗透，是否有结石或肿瘤。

我们可以使用一个32比特的数字，比如0x0badf00d，或者某人的生日 0x11101979并将这个4字节数字写到我们分析的程序使用的文件中某个位置。

然后在使用tracer的code coverage模式跟踪这个程序时，使用grep工具或者仅仅是搜索文本(跟踪结果)，我们可以轻松看到值在哪里和如何被使用。

使用cc模式下tracer的结果，可使用grep：

```
0x150bf66 (_kziaia+0x14), e=		1 [MOV EBX, [EBP+8]] [EBP+8]=0xf59c9340x150bf69 (_kziaia+0x17), e=		1 [MOV EDX, [69AEB08h]] [69AEB08h]=00x150bf6f (_kziaia+0x1d), e=		1 [FS: MOV EAX, [2Ch]]0x150bf75 (_kziaia+0x23), e=		1 [MOV ECX, [EAX+EDX*4]] [EAX+EDX*4]=0xf1ac3600x150bf78 (_kziaia+0x26), e=		1 [MOV [EBP-4], ECX] ECX=0xf1ac360```
在网络包中也可以使用。很重要的一点是，幻数必须独特没有在该程序中出现过。

除了tracer，[DosBox(MS-DOS仿真器)的heavydebug模式下也能将每条指令执行后寄存器状态写入到一个文本文件中](blog.yurichev.com)，因此，这种技术对于DOS程序也是很有用的。